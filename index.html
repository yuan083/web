<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>税务师学习平台 - 界面演示</title>
    <link rel="stylesheet" href="assets/css/style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.7"></script>
</head>
<body>
    <!-- 背景装饰 -->
    <div class="floating-hearts"></div>

    <!-- 全局加载指示器 -->
    <div id="global-loader" class="global-loader hidden">
        <div class="loader-content">
            <div class="loader-spinner"></div>
            <p id="loader-text">加载中...</p>
        </div>
    </div>

    <!-- 网络状态指示器 -->
    <div id="network-status" class="network-status">
        <i class="fas fa-wifi"></i>
        <span id="network-text">在线</span>
    </div>

    <div id="app">
        <!-- 加载屏幕 -->
        <div id="loading-screen" class="screen">
            <div class="loading-container">
                <div class="loading-spinner"></div>
                <h2>税务师学习平台</h2>
                <p>正在初始化应用...</p>
            </div>
        </div>

        <!-- 主界面 -->
        <div id="home-screen" class="screen hidden">
            <nav class="navbar">
                <div class="nav-brand">
                    <i class="fas fa-graduation-cap"></i>
                    <span>税务师学习平台</span>
                </div>
                <div class="nav-menu">
                    <button class="nav-btn" onclick="showScreen('home')">
                        <i class="fas fa-home"></i>
                        <span>首页</span>
                    </button>
                    <button class="nav-btn" onclick="showScreen('deck')">
                        <i class="fas fa-book"></i>
                        <span>科目</span>
                    </button>
                    <button class="nav-btn" onclick="showScreen('learning')">
                        <i class="fas fa-graduation-cap"></i>
                        <span>学习</span>
                    </button>
                    <button class="nav-btn" onclick="showScreen('profile')">
                        <i class="fas fa-user"></i>
                        <span>我的</span>
                    </button>
                </div>
                <div class="nav-user">
                    <div id="user-guest" class="guest-user">
                        <button class="btn-login" onclick="showAuthModal('login')">登录</button>
                        <button class="btn-register" onclick="showAuthModal('register')">注册</button>
                    </div>
                    <div id="user-logged-in" class="logged-in-user hidden">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTYiIGZpbGw9IiNGRkI2QzEiLz4KPGNpcmNsZSBjeD0iMTYiIGN5PSIxMiIgcj0iNSIgZmlsbD0iIzlEQ0EwNSIvPgo8cGF0aCBkPSJNMjQgMjZDMjQgMjEuMzcyIDE5LjYyOCAxNy41IDE0LjUgMTcuNUM5LjM3MiAxNy41IDUgMjEuMzcyIDUgMjYiIGZpbGw9IiM5RENBMDUiLz4KPC9zdmc+" alt="用户头像" class="user-avatar">
                        <span id="user-name">欢迎体验</span>
                        <button class="btn-logout" onclick="handleSignOut()" title="退出登录">
                            <i class="fas fa-sign-out-alt"></i>
                        </button>
                    </div>
                </div>
            </nav>

            <main class="main-content">
                <!-- 用户统计 -->
                <section class="stats-section">
                    <h2>学习统计</h2>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <i class="fas fa-clock"></i>
                            <div class="stat-content">
                                <h3>2小时</h3>
                                <p>总学习时间</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-cards-blank"></i>
                            <div class="stat-content">
                                <h3>25</h3>
                                <p>学习卡片</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-fire"></i>
                            <div class="stat-content">
                                <h3>3天</h3>
                                <p>连续学习</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-bookmark"></i>
                            <div class="stat-content">
                                <h3>2</h3>
                                <p>我的科目</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 快捷学习 -->
                <section class="quick-actions">
                    <div class="quick-actions-grid">
                        <button class="quick-action-btn primary" onclick="startNewLearning()">
                            <i class="fas fa-plus-circle"></i>
                            <div class="action-content">
                                <h3>待学习</h3>
                                <p>3张新卡片</p>
                            </div>
                            <div class="action-badge">📚</div>
                        </button>
                        
                        <button class="quick-action-btn secondary" onclick="startReview()">
                            <i class="fas fa-redo-circle"></i>
                            <div class="action-content">
                                <h3>待复习</h3>
                                <p>7张卡片</p>
                            </div>
                            <div class="action-badge">🔄</div>
                        </button>
                    </div>
                </section>

                <!-- 最近学习 -->
                <section class="recent-section">
                    <h2>最近学习</h2>
                    <div id="recent-study" class="recent-study-container">
                        <div class="recent-session-item">
                            <div class="session-header">
                                <span class="session-date">今天</span>
                                <span class="session-time">15分钟</span>
                            </div>
                            <div class="session-stats">
                                <span>学习了5张卡片</span>
                                <span>正确率80%</span>
                            </div>
                        </div>
                        <div class="recent-session-item">
                            <div class="session-header">
                                <span class="session-date">昨天</span>
                                <span class="session-time">30分钟</span>
                            </div>
                            <div class="session-stats">
                                <span>学习了12张卡片</span>
                                <span>正确率85%</span>
                            </div>
                        </div>
                    </div>
                </section>
            </main>
        </div>

        <!-- 科目选择界面 -->
        <div id="deck-screen" class="screen hidden">
            <nav class="navbar">
                <div class="nav-brand">
                    <i class="fas fa-arrow-left" onclick="showScreen('home')"></i>
                    <span>科目选择</span>
                </div>
                <div class="nav-actions">
                    <button class="btn-primary" onclick="showModal()">
                        <i class="fas fa-plus"></i>
                        新建科目
                    </button>
                </div>
            </nav>

            <main class="main-content">
                <div id="deck-list" class="deck-list">
                    <div class="deck-item" onclick="showScreen('learning')">
                        <div class="deck-header">
                            <h3>税法基础</h3>
                            <span class="deck-visibility">🌍</span>
                        </div>
                        <p class="deck-description">税务师考试基础知识点，包含税收法律、法规等核心内容</p>
                        <div class="deck-meta">
                            <span class="deck-cards">50张卡片</span>
                            <span class="deck-difficulty">初级</span>
                        </div>
                    </div>
                    <div class="deck-item" onclick="showScreen('learning')">
                        <div class="deck-header">
                            <h3>会计实务</h3>
                            <span class="deck-visibility">🔒</span>
                        </div>
                        <p class="deck-description">会计实际操作技能，财务报表分析等实用技能</p>
                        <div class="deck-meta">
                            <span class="deck-cards">30张卡片</span>
                            <span class="deck-difficulty">中级</span>
                        </div>
                    </div>
                </div>
            </main>
        </div>

        <!-- 学习界面 -->
        <div id="learning-screen" class="screen hidden">
            <nav class="navbar">
                <div class="nav-brand">
                    <i class="fas fa-arrow-left" onclick="showScreen('deck')"></i>
                    <span>税法基础 - 学习中</span>
                </div>
                <div class="nav-actions">
                    <button class="btn-secondary" onclick="showScreen('deck')">
                        <i class="fas fa-times"></i>
                        退出学习
                    </button>
                </div>
            </nav>

            <main class="main-content">
                <div id="learning-content" class="learning-content">
                    <!-- 学习卡片 -->
                    <div id="study-card" class="study-card">
                        <div class="card-inner">
                            <div class="card-front">
                                <div class="card-header">
                                    <span class="card-type">问答</span>
                                    <span class="card-difficulty">初级</span>
                                </div>
                                <div class="card-content">
                                    <div class="card-question">
                                        什么是增值税？
                                    </div>
                                </div>
                                <div class="card-actions">
                                    <button class="btn-primary" onclick="flipCard()">
                                        <i class="fas fa-sync-alt"></i>
                                        查看答案
                                    </button>
                                </div>
                            </div>
                            <div class="card-back">
                                <div class="card-header">
                                    <span class="card-type">问答</span>
                                    <span class="card-difficulty">初级</span>
                                </div>
                                <div class="card-content">
                                    <div class="card-answer">
                                        增值税是以商品或劳务在生产、流通、服务环节中产生的增值额作为计税依据而征收的一种流转税。
                                    </div>
                                </div>
                                <div class="card-actions">
                                    <button class="btn-danger" onclick="handleAnswer(false)">
                                        <i class="fas fa-times"></i>
                                        记不住
                                    </button>
                                    <button class="btn-success" onclick="handleAnswer(true)">
                                        <i class="fas fa-check"></i>
                                        记住了
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>

        <!-- 待学习页面 -->
        <div id="new-learning-screen" class="screen hidden">
            <nav class="navbar">
                <div class="nav-brand">
                    <i class="fas fa-arrow-left" onclick="showScreen('home')"></i>
                    <span>待学习</span>
                </div>
                <div class="nav-actions">
                    <button class="btn-primary" onclick="startLearningSession()">
                        <i class="fas fa-play"></i>
                        开始学习
                    </button>
                </div>
            </nav>

            <main class="main-content">
                <!-- 学习进度 -->
                <section class="stats-section">
                    <h2>学习进度</h2>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <i class="fas fa-clock"></i>
                            <div class="stat-content">
                                <h3>预计15分钟</h3>
                                <p>本次学习时间</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-cards-blank"></i>
                            <div class="stat-content">
                                <h3>3张</h3>
                                <p>新卡片</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-trophy"></i>
                            <div class="stat-content">
                                <h3>初级</h3>
                                <p>难度等级</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 新卡片预览 -->
                <section class="new-cards-section">
                    <h2>即将学习的卡片</h2>
                    <div class="cards-preview-grid">
                        <div class="card-preview-item">
                            <div class="card-preview-header">
                                <span class="card-type-badge">问答</span>
                                <span class="card-difficulty-badge">初级</span>
                            </div>
                            <div class="card-preview-content">
                                <h3>什么是增值税？</h3>
                                <p>增值税是以商品或劳务在生产、流通、服务环节中产生的增值额作为计税依据而征收的一种流转税。</p>
                            </div>
                            <div class="card-preview-footer">
                                <span class="card-subject">税法基础</span>
                                <span class="card-time">⏱️ 2分钟</span>
                            </div>
                        </div>
                        
                        <div class="card-preview-item">
                            <div class="card-preview-header">
                                <span class="card-type-badge">选择</span>
                                <span class="card-difficulty-badge">初级</span>
                            </div>
                            <div class="card-preview-content">
                                <h3>增值税的税率有哪些？</h3>
                                <p>包括基本税率、低税率、零税率等不同档次...</p>
                            </div>
                            <div class="card-preview-footer">
                                <span class="card-subject">税法基础</span>
                                <span class="card-time">⏱️ 3分钟</span>
                            </div>
                        </div>
                        
                        <div class="card-preview-item">
                            <div class="card-preview-header">
                                <span class="card-type-badge">判断</span>
                                <span class="card-difficulty-badge">初级</span>
                            </div>
                            <div class="card-preview-content">
                                <h3>增值税是价内税吗？</h3>
                                <p>判断增值税的性质和特点...</p>
                            </div>
                            <div class="card-preview-footer">
                                <span class="card-subject">税法基础</span>
                                <span class="card-time">⏱️ 1分钟</span>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 学习建议 -->
                <section class="learning-tips">
                    <div class="tips-container">
                        <div class="tip-item">
                            <i class="fas fa-lightbulb"></i>
                            <div class="tip-content">
                                <h4>💡 学习建议</h4>
                                <p>建议找个安静的环境，专注学习这些基础知识。每张卡片学习后可以适当休息一下。</p>
                            </div>
                        </div>
                    </div>
                </section>
            </main>
        </div>

        <!-- 待复习页面 -->
        <div id="review-screen" class="screen hidden">
            <nav class="navbar">
                <div class="nav-brand">
                    <i class="fas fa-arrow-left" onclick="showScreen('home')"></i>
                    <span>待复习</span>
                </div>
                <div class="nav-actions">
                    <button class="btn-primary" onclick="startReviewSession()">
                        <i class="fas fa-redo"></i>
                        开始复习
                    </button>
                </div>
            </nav>

            <main class="main-content">
                <!-- 复习进度 -->
                <section class="stats-section">
                    <h2>复习进度</h2>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <i class="fas fa-clock"></i>
                            <div class="stat-content">
                                <h3>预计20分钟</h3>
                                <p>本次复习时间</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-cards-blank"></i>
                            <div class="stat-content">
                                <h3>7张</h3>
                                <p>复习卡片</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-calendar-check"></i>
                            <div class="stat-content">
                                <h3>今天到期</h3>
                                <p>复习时间</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 复习卡片列表 -->
                <section class="review-cards-section">
                    <h2>待复习卡片</h2>
                    <div class="review-cards-grid">
                        <div class="review-card-item">
                            <div class="review-card-header">
                                <div class="review-info">
                                    <span class="card-type-badge">问答</span>
                                    <span class="review-level">Level 2</span>
                                </div>
                                <div class="review-due">
                                    <i class="fas fa-clock"></i>
                                    <span>今天到期</span>
                                </div>
                            </div>
                            <div class="review-card-content">
                                <h3>什么是增值税？</h3>
                                <p class="review-hint">上次学习：2天前</p>
                            </div>
                            <div class="review-card-footer">
                                <span class="card-subject">税法基础</span>
                                <span class="review-progress">📈 间隔：2天</span>
                            </div>
                        </div>

                        <div class="review-card-item">
                            <div class="review-card-header">
                                <div class="review-info">
                                    <span class="card-type-badge">选择</span>
                                    <span class="review-level">Level 3</span>
                                </div>
                                <div class="review-due">
                                    <i class="fas fa-clock"></i>
                                    <span>今天到期</span>
                                </div>
                            </div>
                            <div class="review-card-content">
                                <h3>增值税的纳税人包括哪些？</h3>
                                <p class="review-hint">上次学习：4天前</p>
                            </div>
                            <div class="review-card-footer">
                                <span class="card-subject">税法基础</span>
                                <span class="review-progress">📈 间隔：4天</span>
                            </div>
                        </div>

                        <div class="review-card-item">
                            <div class="review-card-header">
                                <div class="review-info">
                                    <span class="card-type-badge">判断</span>
                                    <span class="review-level">Level 1</span>
                                </div>
                                <div class="review-due">
                                    <i class="fas fa-clock"></i>
                                    <span>今天到期</span>
                                </div>
                            </div>
                            <div class="review-card-content">
                                <h3>小规模纳税人的标准是什么？</h3>
                                <p class="review-hint">上次学习：1天前</p>
                            </div>
                            <div class="review-card-footer">
                                <span class="card-subject">税法基础</span>
                                <span class="review-progress">📈 间隔：1天</span>
                            </div>
                        </div>

                        <div class="review-card-item">
                            <div class="review-card-header">
                                <div class="review-info">
                                    <span class="card-type-badge">问答</span>
                                    <span class="review-level">Level 4</span>
                                </div>
                                <div class="review-due">
                                    <i class="fas fa-clock"></i>
                                    <span>今天到期</span>
                                </div>
                            </div>
                            <div class="review-card-content">
                                <h3>增值税的免税项目有哪些？</h3>
                                <p class="review-hint">上次学习：8天前</p>
                            </div>
                            <div class="review-card-footer">
                                <span class="card-subject">税法基础</span>
                                <span class="review-progress">📈 间隔：8天</span>
                            </div>
                        </div>

                        <div class="review-card-item">
                            <div class="review-card-header">
                                <div class="review-info">
                                    <span class="card-type-badge">计算</span>
                                    <span class="review-level">Level 2</span>
                                </div>
                                <div class="review-due">
                                    <i class="fas fa-clock"></i>
                                    <span>今天到期</span>
                                </div>
                            </div>
                            <div class="review-card-content">
                                <h3>如何计算应纳增值税额？</h3>
                                <p class="review-hint">上次学习：2天前</p>
                            </div>
                            <div class="review-card-footer">
                                <span class="card-subject">税法基础</span>
                                <span class="review-progress">📈 间隔：2天</span>
                            </div>
                        </div>

                        <div class="review-card-item">
                            <div class="review-card-header">
                                <div class="review-info">
                                    <span class="card-type-badge">选择</span>
                                    <span class="review-level">Level 1</span>
                                </div>
                                <div class="review-due">
                                    <i class="fas fa-clock"></i>
                                    <span>今天到期</span>
                                </div>
                            </div>
                            <div class="review-card-content">
                                <h3>增值税的征收范围是什么？</h3>
                                <p class="review-hint">上次学习：1天前</p>
                            </div>
                            <div class="review-card-footer">
                                <span class="card-subject">税法基础</span>
                                <span class="review-progress">📈 间隔：1天</span>
                            </div>
                        </div>

                        <div class="review-card-item">
                            <div class="review-card-header">
                                <div class="review-info">
                                    <span class="card-type-badge">判断</span>
                                    <span class="review-level">Level 5</span>
                                </div>
                                <div class="review-due">
                                    <i class="fas fa-clock"></i>
                                    <span>今天到期</span>
                                </div>
                            </div>
                            <div class="review-card-content">
                                <h3>增值税专用发票的作用是什么？</h3>
                                <p class="review-hint">上次学习：16天前</p>
                            </div>
                            <div class="review-card-footer">
                                <span class="card-subject">税法基础</span>
                                <span class="review-progress">📈 间隔：16天</span>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 复习建议 -->
                <section class="learning-tips">
                    <div class="tips-container">
                        <div class="tip-item">
                            <i class="fas fa-brain"></i>
                            <div class="tip-content">
                                <h4>🧠 复习提示</h4>
                                <p>根据间隔重复算法，这些卡片需要今天复习。记得诚实评估自己的掌握程度，系统会据此安排下次复习时间。</p>
                            </div>
                        </div>
                    </div>
                </section>
            </main>
        </div>

        <!-- 个人资料界面 -->
        <div id="profile-screen" class="screen hidden">
            <nav class="navbar">
                <div class="nav-brand">
                    <i class="fas fa-arrow-left" onclick="showScreen('home')"></i>
                    <span>个人资料</span>
                </div>
            </nav>

            <main class="main-content">
                <div class="profile-container">
                    <div class="profile-header">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxjaXJjbGUgY3g9IjUwIiBjeT0iNTAiIHI9IjUwIiBmaWxsPSIjRkZCNkMxIi8+CjxjaXJjbGUgY3g9IjUwIiBjeT0iNDAiIHI9IjE1IiBmaWxsPSIjOUNEQTA1Ii8+CjxwYXRoIGQ9Ik03NSA4MEM3NSA2NS42MjUgNjEuMjUgNTUgNTAgNTVDMzguNzUgNTUgMjUgNjUuNjI1IDI1IDgwIiBmaWxsPSIjOUNEQTA1Ii8+Cjwvc3ZnPg==" alt="头像" class="profile-avatar">
                        <div class="profile-info">
                            <h2 id="profile-name">演示用户</h2>
                            <p id="profile-email">demo@example.com</p>
                            <span class="role-badge">学生</span>
                        </div>
                    </div>

                    <div class="profile-section">
                        <h3>个人信息</h3>
                        <form>
                            <div class="form-group">
                                <label>昵称</label>
                                <input type="text" value="演示用户">
                            </div>
                            <div class="form-group">
                                <label>邮箱</label>
                                <input type="email" value="demo@example.com" readonly>
                            </div>
                        </form>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- 认证模态框 -->
    <div id="auth-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>用户登录</h3>
                <button class="close-modal" onclick="hideAuthModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <!-- 标签页 -->
                <div class="auth-tabs">
                    <button id="login-tab" class="auth-tab active" onclick="switchAuthTab('login')">登录</button>
                    <button id="register-tab" class="auth-tab" onclick="switchAuthTab('register')">注册</button>
                </div>

                <!-- 登录表单 -->
                <form id="login-form" onsubmit="handleLogin(event)">
                    <div class="form-group">
                        <label>邮箱</label>
                        <input type="email" id="login-email" placeholder="请输入邮箱" required>
                    </div>
                    <div class="form-group">
                        <label>密码</label>
                        <input type="password" id="login-password" placeholder="请输入密码" required>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" onclick="hideAuthModal()">取消</button>
                        <button type="submit" class="btn-primary">登录</button>
                    </div>
                </form>

                <!-- 注册表单 -->
                <form id="register-form" class="hidden" onsubmit="handleRegister(event)">
                    <div class="form-group">
                        <label>昵称</label>
                        <input type="text" id="register-name" placeholder="请输入昵称" required>
                    </div>
                    <div class="form-group">
                        <label>邮箱</label>
                        <input type="email" id="register-email" placeholder="请输入邮箱" required>
                    </div>
                    <div class="form-group">
                        <label>密码</label>
                        <input type="password" id="register-password" placeholder="请输入密码（至少6位）" required minlength="6">
                    </div>
                    <div class="form-group">
                        <label>确认密码</label>
                        <input type="password" id="register-confirm-password" placeholder="请再次输入密码" required minlength="6">
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" onclick="hideAuthModal()">取消</button>
                        <button type="submit" class="btn-primary">注册</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- 模态框 -->
    <div id="modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>新建科目</h3>
                <button class="close-modal" onclick="hideModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="form-group">
                        <label>科目名称 *</label>
                        <input type="text" placeholder="请输入科目名称">
                    </div>
                    <div class="form-group">
                        <label>科目描述</label>
                        <textarea placeholder="请输入科目描述"></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" onclick="hideModal()">取消</button>
                        <button type="button" class="btn-primary" onclick="showToast('演示版本：创建功能暂不可用', 'info')">保存</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- 提示消息 -->
    <div id="toast" class="toast"></div>

    <!-- JavaScript文件 -->
    <script src="assets/js/main.js"></script>
</body>
</html>